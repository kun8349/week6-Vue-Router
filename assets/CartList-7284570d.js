import{S as d}from"./sweetalert2.all-281a79b7.js";import{_ as m,o,c as i,a as t,F as c,e as f,t as l,f as g,v as x}from"./index-ecb93a64.js";const{VITE_APP_URL:h,VITE_APP_PATH:_}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"kevin-jiang",BASE_URL:"/week6-Vue-Router/",MODE:"production",DEV:!1,PROD:!0},b={data(){return{cartList:{},loadingItem:"",total:0}},methods:{getCart(){this.$http.get(`${h}api/${_}/cart`).then(e=>{this.cartList=e.data.data.carts,this.total=e.data.data.total})},deleteSingle(e){this.loadingItem=e.id,this.$http.delete(`${h}api/${_}/cart/${e.id}`).then(a=>{d.fire({position:"top-end",icon:"success",title:"成功刪除單一產品d(`･∀･)b",showConfirmButton:!1,timer:1500,toast:!0}),this.getCart(),this.loadingItem=""}).catch(()=>{d.fire({icon:"success",title:"刪除單一品項失敗٩(ŏ﹏ŏ、)۶",showConfirmButton:!1,timer:1500})})},editNum(e){const a={product_id:e.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${h}api/${_}/cart/${e.id}`,{data:a}).then(u=>{d.fire({position:"top-end",icon:"success",title:"成功加入購物車(｡◕∀◕｡)",showConfirmButton:!1,timer:1500,toast:!0}),this.getCart(),this.loadingItem=""}).catch(()=>{d.fire({icon:"success",title:"加入購物車失敗(｡ŏ_ŏ)",showConfirmButton:!1,timer:1500})})}},mounted(){this.getCart()}},w=t("p",null,"這是購物車",-1),C={class:"table align-middle"},y=t("thead",null,[t("tr",null,[t("th",{width:"50px"}),t("th",{scope:"col",class:"text-center"},"品名"),t("th",{scope:"col",width:"100px"},"單價"),t("th",{scope:"col",width:"220px",class:"text-center"},"數量/單位"),t("th",{width:"150px"})])],-1),I={class:"table-group-divider"},$=["onClick","disabled"],k={class:"text-center"},L={class:"fs-5"},V={class:""},v={class:"input-group w-50"},B=["onUpdate:modelValue","onChange","disabled"],E={class:"input-group-text"},A={class:"text-end fs-5"},T=t("td",null,null,-1),S=t("td",null,null,-1),D=t("td",null,null,-1),R=t("td",null,null,-1),U={class:"fs-5 text-end fw-bold"},q={key:1},N=t("td",null,null,-1),F=t("td",{class:"text-secondary text-end"},[t("h3",{class:"mt-3"},"購物車目前沒東西! 叉滴~")],-1),H=t("td",null,null,-1),M=t("td",null,null,-1),O=t("td",null,null,-1),j=[N,F,H,M,O];function P(e,a,u,X,n,r){return o(),i(c,null,[w,t("table",C,[y,t("tbody",I,[n.cartList.length!==0?(o(),i(c,{key:0},[(o(!0),i(c,null,f(n.cartList,s=>(o(),i("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:()=>r.deleteSingle(s),disabled:n.loadingItem===s.id}," X ",8,$)]),t("td",k,l(s.product.title),1),t("td",L,l(s.product.price),1),t("td",V,[t("div",v,[g(t("input",{"onUpdate:modelValue":p=>s.qty=p,type:"number",min:"1",class:"form-control",onChange:()=>r.editNum(s),disabled:n.loadingItem===s.id},null,40,B),[[x,s.qty]]),t("span",E,l(s.product.unit),1)])]),t("td",A," $"+l(s.total),1)]))),128)),t("tr",null,[T,S,D,R,t("td",U," 總計： $"+l(n.total),1)])],64)):(o(),i("tr",q,j))])])],64)}const J=m(b,[["render",P]]);export{J as default};
